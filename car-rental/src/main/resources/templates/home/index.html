<!DOCTYPE html>
<html lang="vi" 
      xmlns:th="http://www.thymeleaf.org" 
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turo - Thuê xe ô tô</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-text">Huy Hoàng auto 88</span>
                </div>
                <nav class="nav">
                    <a href="#" class="nav-link">Huy Hoàng auto 88</a>
                </nav>
                <div class="header-actions">
    <button class="menu-btn">
        <i class="fas fa-bars"></i>
    </button>

    <div class="user-dropdown-container"> 
    
        <button class="user-btn"> <span sec:authorize="isAuthenticated()" th:text="${#authentication.name}" class="username-display"></span>
            
            <i class="fas fa-user-circle"></i>
        </button>
        
        <div class="user-dropdown-menu"> <div sec:authorize="isAnonymous()">
                <a th:href="@{/login}">Đăng nhập</a>
                <a th:href="@{/register}">Đăng ký</a>
                <a th:href="@{/register(role='HOST')}">Trở thành chủ xe</a>
            </div>
            
            <div sec:authorize="isAuthenticated()">
                <a th:href="@{/profile}">Hồ sơ của tôi</a>
                <a th:href="@{/change-password}">Đổi mật khẩu</a>  <!-- Thêm dòng này -->
                
                <form th:action="@{/logout}" method="post" class="logout-form">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                    <button type="submit" class="logout-button-as-link">Đăng xuất</button>
                </form>
            </div>
        </div>
    </div>
</div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-background">
            <div class="hero-overlay"></div>
        </div>
        <div class="container">
            <div class="hero-content">
                <h1 class="hero-title">Đừng lãng phí thời gian ở đại lý</h1>
                <p class="hero-subtitle">Thuê chiếc xe bạn muốn, ở bất cứ đâu bạn muốn</p>

                <!-- Search Form -->
                <form class="search-form" method="GET" action="/search">
                    <input type="hidden" id="latitude" name="latitude">
                    <input type="hidden" id="longitude" name="longitude">
                    <div class="search-field">
                        <label>Địa điểm</label>
                        <input type="text" id="location" name="location" placeholder="Thành phố, sân bay, địa chỉ hoặc khách sạn" required>
                    </div>
                    <div class="search-field">
                        <label>Ngày đi</label>
                        <input type="date" id="pickupDate" name="pickupDate" required>
                    </div>
                    <div class="search-field">
                        <label></label>
                        <input type="time" id="pickupTime" name="pickupTime" required>
                    </div>
                    <div class="search-field">
                        <label>Ngày về</label>
                        <input type="date" id="returnDate" name="returnDate" required>
                    </div>
                    <div class="search-field">
                        <label></label>
                        <input type="time" id="returnTime" name="returnTime" required>
                    </div>
                    <button type="submit" class="search-btn">
                        <i class="fas fa-search"></i>
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- Navigation Tabs -->
    <section class="nav-tabs">
        <div class="container">
            <div class="tabs">
                <button class="tab active">
                    <i class="fas fa-car"></i>
                    Tất cả
                </button>
                <button class="tab">
                    <i class="fas fa-plane"></i>
                    Sân bay và ga tàu
                </button>
                <button class="tab">
                    <i class="fas fa-map-marker-alt"></i>
                    Gần đây
                </button>
                <button class="tab">
                    <i class="fas fa-truck"></i>
                    Giao xe tận nơi
                </button>
                <button class="tab">
                    <i class="fas fa-city"></i>
                    Thành phố
                </button>
            </div>
        </div>
    </section>

    <!-- Info Section -->
    <section class="info-section">
        <div class="container">
            <div class="info-grid">
                <div class="info-card">
                    <img src="https://via.placeholder.com/100" alt="Safe Driving">
                    <h3>Lái xe an toàn cùng Mioto</h3>
                    <p>Chuyến đi trên Mioto được bảo vệ với Gói bảo hiểm thuê xe tự lái MIC & DBV (VNI).</p>
                </div>
                <div class="info-card">
                    <img src="https://via.placeholder.com/100" alt="Easy Booking">
                    <h3>An tâm đặt xe</h3>
                    <p>Không tính phí hủy chuyến trong vòng 1h sau khi thanh toán giữ chỗ.</p>
                </div>
                <div class="info-card">
                    <img src="https://via.placeholder.com/100" alt="Simple Process">
                    <h3>Thủ tục đơn giản</h3>
                    <p>Chỉ cần có CCCD gắn chip (Hoặc...(truncated 1440 characters)...button class="nav-arrow next"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
                <div class="car-grid" th:if="${cars != null and !cars.isEmpty()}">
                    <div th:each="cars : ${cars}" class="car-card" th:attr="data-cars-id=${cars.id}">
                        <div class="car-image">
                            <img th:src="${cars.imageUrl} ?: 'https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=300&h=200&fit=crop'"
                                 th:alt="${cars.make} ${cars.model}"
                                 alt="{cars-image}">
                        </div>
                        <div class="car-info">
                            <h3 th:text="${cars.make} + ' ' + ${cars.model} + (${cars.year} != null ? ' ' + ${cars.year} : '')">Vehicle Name</h3>
                            <div class="rating">
                                <span class="stars" th:text="${#numbers.formatDecimal(cars.rating, 1, 2)} + ' ⭐'">4.5 ⭐</span>
                                <span class="reviews" th:text="('(' + ${cars.numReviews} + ' chuyến)')">(0 chuyến)</span>
                            </div>
                            <div class="price">
                                <span class="price-value" th:text="(${cars.dailyPrice} * 3) + '₫ cho 3 ngày'">Price for 3 days</span>
                            </div>
                            <a th:href="@{/search(vehicleId=${cars.id})}" class="book-btn">Đặt xe</a>
                        </div>
                    </div>
                </div>
                <div th:if="${cars == null or cars.isEmpty()}" class="no-cars">
                    <p>Không có xe nào khả dụng. Hãy thử tìm kiếm.</p>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Huy Hoàng Auto 88</h3>
                    <ul>
                        <li><a href="#">Về chúng tôi</a></li>
                        <li><a href="#">Quy định</a></li>
                        <li><a href="#">Tuyển dụng</a></li>
                        <li><a href="#">Báo chí</a></li>
                        <li><a href="#">Cửa hàng Huy Hoàng Auto 88</a></li>
                        <li><a href="#">Huy Hoàng Auto 88 Việt Nam</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3>Địa điểm</h3>
                    <ul>
                        <li><a href="#">Hà Nội</a></li>
                        <li><a href="#">TP. Hồ Chí Minh</a></li>
                        <li><a href="#">Đà Nẵng</a></li>
                        <li><a href="#">Cần Thơ</a></li>
                        <li><a href="#">Hải Phòng</a></li>
                        <li><a href="#">Nha Trang</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3>Khám phá</h3>
                    <ul>
                        <li><a href="#">Tại sao chọn Huy Hoàng Auto 88</a></li>
                        <li><a href="#">Cưới hỏi</a></li>
                        <li><a href="#">Du lịch</a></li>
                        <li><a href="#">Bảo mật</a></li>
                        <li><a href="#">Trợ giúp</a></li>
                        <li><a href="#">Bảo hiểm và bảo vệ (khách)</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3>Chủ xe</h3>
                    <ul>
                        <li><a href="#">Đăng ký xe của bạn</a></li>
                        <li><a href="#">Chủ xe sao</a></li>
                        <li><a href="#">Công cụ cho chủ xe</a></li>
                        <li><a href="#">Bảo hiểm và bảo vệ (chủ xe)</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-tiktok"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                        <a href="#" class="blog-link">BLOG</a>
                    </div>
                    <div class="app-links">
                        <a href="#" class="app-store">
                            <img data-src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg" alt="App Store">
                        </a>
                        <a href="#" class="google-play">
                            <img data-src="https://play.google.com/intl/en_us/badges/static/images/badges/en_badge_web_generic.png" alt="Google Play">
                        </a>
                    </div>
                    <div class="language-selector">
                        <button class="language-btn">
                            <i class="fas fa-globe"></i>
                            <span>Tiếng Việt</span>
                            <i class="fas fa-chevron-up"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p>©2025 Huy Hoàng Auto 88</p>
                <div class="footer-links">
                    <a href="#">Điều khoản dịch vụ</a>
                    <a href="#">Chính sách bảo mật</a>
                    <a href="#">Tùy chọn cookie</a>
                    <a href="#">Không bán hoặc chia sẻ thông tin cá nhân của tôi</a>
                </div>
            </div>
        </div>
    </footer>

    <script th:src="@{/js/script.js}"></script>
</body>
</html>